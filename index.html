<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>HTML 5 Boilerplate</title>

    <script src="./javascript/libs/jcurry.min.js"></script>


    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/index.css">
</head>
<script>

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const page = urlParams.get('page')
    console.log(page);


    var images = [];
    function preload() {
        for (var i = 0; i < arguments.length; i++) {
            images[i] = new Image();
            images[i].src = preload.arguments[i];
        }
    }

    preload(
        './imgs/btn/start.png',
        './imgs/btn/start_hover.png',
        './imgs/btn/infocred.png',
        './imgs/btn/infocred_hover.png',
        './imgs/btn/tutorial.png',
        './imgs/btn/tutorial_hover.png',
        './imgs/btn/levels.png',
        './imgs/btn/levels_hover.png',
        './imgs/btn/endless.png',
        './imgs/btn/endless_hover.png',

        './imgs/btn/exit.png',
        './imgs/btn/exit_hover.png',
        './imgs/btn/settings.png',
        './imgs/btn/settings_hover.png',
        './imgs/btn/resume.png',
        './imgs/btn/resume_hover.png',

        './imgs/btn/back.png',
        './imgs/btn/back_hover.png',
    )


    function showLevels() {
        $('.menu').hide();
        $('#choose-gamemode').hide();
        $('.levels').show();
        $('.slider-container').show();
    }

    function showMenu() {
        $('.levels').hide();
        $('#choose-gamemode').hide();
        $('.slider-container').show();
        $('.menu').show();
    }

    function playLevel(level) {
        window.location.replace(`./game.html?level=${level}`);
    }

    window.onload = (event) => {

        var gameLogoEffect = new Audio('./music/WeepStudiosEffect.mp3');
        gameLogoEffect.volume = 0.5;

        var menuMusic = new Audio('./music/menu-music.mp3');
        menuMusic.loop = true;


        if (!page) {
            $('.intro').show();

            setTimeout(() => {
                $('.intro').hide();
                $('.slider-container').show();
                $('.menu').show();
                startMenuMusic();
            }, 5 * 1000);

            setTimeout(() => {
                gameLogoEffect.play();
            }, 1 * 1000);
        } else if (page === 'title') {
            showMenu();
            startMenuMusic();
        } else if (page === 'levels') {
            showLevels();
            startMenuMusic();
        }

        function startMenuMusic() {
            menuMusic.play();
            if (menuMusic.paused) {
                $('.volume-icon').attr('src', './imgs/volume_muted.png');
            }
        }


        $('#start-btn').on('click', function () {
            $('#choose-gamemode').css('display', 'flex');
            $('#choose-gamemode').addClass('open-gamemode-chooser');
        });

        $('.volume-icon').on('click', function () {
            if (menuMusic.paused) {
                menuMusic.play();
                this.src = './imgs/volume.png';
            } else {
                menuMusic.pause();
                this.src = './imgs/volume_muted.png';
            }
        });





        var slider = document.getElementById("myRange");
        slider.oninput = function () {
            menuMusic.volume = this.value;
        }

        // $('.img-button-link').on('mouseenter', function() {
        //     this.src = this.src.replace('.png', '_hover.png');
        // })

    };




</script>

<body>
    <div class="noselect">
        <div class="intro">
            <div class="image">
                <img class="fade-in" src="./imgs/weep2.png" alt="WEEP Studios">
            </div>
        </div>
        <div class="menu">
            <div class="snowflakes" aria-hidden="true">
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
            </div>
            <div class="buttons">
                <img src="./imgs/logo.png" alt="Snowshake Park"  style="transform: scale(1.6);">
                <br><br><br><br><br>

                <div id="start-btn" class="img-button-link" style="transform: scale(1.5);"> </div>
                <br>
                <div id="info-btn" class="img-button-link" style="transform: scale(1.5);"> </div>
            </div>
        </div>



        <div id="choose-gamemode">

            <!-- <a class="btn-gamemode">Tutorial</a>
            <a class="btn-gamemode" onclick="showLevels();">Levels</a>
            <a class="btn-gamemode">Endless</a> -->

            <div id="tutorial-btn" class="start-option img-button-link"> </div>
            <div id="levels-btn" class="start-option img-button-link" onclick="showLevels();"> </div>
            <div id="endless-btn" class="start-option img-button-link"> </div>

        </div>

        <div class="levels">

            <table style="border-spacing: 10px;">

                <tr>
                    <td class="level" onclick="playLevel('level_1')"> 1 </td>
                    <td class="level" onclick="playLevel('level_2')"> 2 </td>
                </tr>

            </table>

            <div id="level-go-back-btn" class="img-button-link" onclick="showMenu();"> </div>


        </div>

        <div class="slider-container">
            <img class="volume-icon" src="./imgs/volume.png">
            <input type="range" min="0" max="1" value="1" step="0.01" class="slider" id="myRange">
        </div>

    </div>
</body>

</html>