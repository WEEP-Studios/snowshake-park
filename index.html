<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>HTML 5 Boilerplate</title>

    <script src="./javascript/libs/jcurry.min.js"></script>


    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/index.css">
</head>
<script>

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const page = urlParams.get('page')
    console.log(page);


    function showLevels() {
        $('.menu').hide();
        $('#choose-gamemode').hide();
        $('.levels').show();
    }

    function playLevel(level) {
        window.location.replace(`./game.html?level=${level}`);
    }

    window.onload = (event) => {

        var gameLogoEffect = new Audio('./music/WeepStudiosEffect.mp3');

        var menuMusic = new Audio('./music/menu-music.mp3');
        menuMusic.loop = true;

        if (!page) {
            $('.intro').show();
            $('.slider-container').hide();

            setTimeout(() => {
                $('.intro').hide();
                $('.slider-container').show();
                $('.menu').show();
                menuMusic.play();
            }, 5 * 1000);

            setTimeout(() => {
                gameLogoEffect.play();
            }, 1 * 1000);
        } else if (page === 'title') {
            $('.menu').show();
            menuMusic.play();
        } else if (page === 'levels') {
            showLevels();
            menuMusic.play();
        }


        $('#btn-play-game').on('click', function() {
            $('#choose-gamemode').css('display', 'flex');
            $('#choose-gamemode').addClass('open-gamemode-chooser');
        });

        $('.volume-icon').on('click', function() {
            if (menuMusic.paused) {
                menuMusic.play();
                this.src = './imgs/volume.png';
            } else {
                menuMusic.pause();
                this.src = './imgs/volume_muted.png';
            }
        });





        var slider = document.getElementById("myRange");
        slider.oninput = function () {
            menuMusic.volume = this.value;
        }

    };




</script>

<body>
    <div class="noselect">
        <div class="intro">
            <div class="image">
                <img class="fade-in" src="./imgs/weep2.png" alt="WEEP Studios">
            </div>
        </div>
        <div class="menu">
            <div class="snowflakes" aria-hidden="true">
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
                <div class="snowflake"><img src="./sprites/snowflake.png"></div>
            </div>
            <div class="buttons">
                <img src="./imgs/logo.png" alt="Snowshake Park">
                <br><br><br>
                <a class="btn-link" id="btn-play-game">Play Game</a>
                <br><br><br><br>
                <a class="btn-link">Information</a>
                <br><br><br><br>
                <a class="btn-link">Credits</a>
            </div>
        </div>



        <div id="choose-gamemode">

            <a class="btn-gamemode">Tutorial</a>
            <a class="btn-gamemode" onclick="showLevels();">Levels</a>
            <a class="btn-gamemode">Endless</a>

        </div>

        <div class="levels">

            <table style="border-spacing: 10px;">

                <tr>
                    <td class="level" onclick="playLevel('level_1')"> 1 </td>
                    <td class="level" onclick="playLevel('level_2')"> 2 </td>
                </tr>

            </table>

        </div>


        <div class="slider-container">
            <img class="volume-icon" src="./imgs/volume.png">
            <input type="range" min="0" max="1" value="1" step="0.01" class="slider" id="myRange">
        </div>

    </div>
</body>

</html>